## 1. 의존성 내역
 Spring Web & Security     // 웹 개발 및 보안 설정
 Thymeleaf                 // 서버 사이드 템플릿 엔진
 MyBatis                   // SQL 기반 데이터베이스 연동
 MySQL Driver              // MySQL 데이터베이스## 1-2. Lombok 용어풀이
 DevTools                  // 개발 편의성 도구
 롬복 : 자바의 보일러 플레이트 코드(반복되는 코드)를 줄여주는 라이브러리

## 2. 회원가입 구현하며 알아낸 용어
- BCryptPasswordEncoder : 비밀번호를 안전한 해시값으로 암호화하여 저장해주는 보안 도구 (Spring Security가 제공)
- @Transactional : 여러 단계의 DB 작업(예: 회원 등록 + 권한 부여)을 하나로 묶어, 하나라도 실패하면 전체를 취소해주는 안전장치
- CSRF Token : 사용자가 의도하지 않은 가짜 요청을 방지하기 위해 서버가 발행하는 보안 토큰 (회원가입/로그인 폼에서 필수)
- DTO / Domain 객체 : 계층 간에 데이터를 한꺼번에 실어 나르기 위한 바구니 역할 (Users, UserAuth 클래스)

## 3. 권한 테이블을 따로 두는 이유 (1:N 관계)
- 1:N 관계: 한 명의 사용자(`1`)가 여러 개의 권한(`N`)을 가질 수 있도록 설계하는 방식입니다.
- 유연성: 테이블 하나에 권한 컬럼을 두면 권한을 하나만 줄 수 있지만,
  테이블을 쪼개면 한 사용자에게 `일반`, `골드`, `관리자` 등 여러 줄의 데이터를 추가해 다양한 권한을 부여할 수 있습니다.
- Spring Security의 작동: 시큐리티는 로그인한 사용자가 가진 모든 `user_auth` 데이터를 긁어와서
  "이 사람은 이 페이지에 들어갈 자격이 있는가?"를 판단합니다.

## 4. 아무런 내용을 넣지 않았는데 로그인 페이지가 뜨는 이유
- Spring Security를 의존성에 추가했기 때문입니다.
build.gradle에 spring-boot-starter-security라는 라이브러리를 추가했기 때문입니다.
**"보안이 최우선!"**이라는 철학을 가지고 있어서, 아무런 설정을 하지 않으면 다음과 같은 기본 동작을 수행합니다:
모든 페이지 잠금: 주소창에 뭘 입력하든 일단 "너 누구야?"라고 물어보며 로그인 페이지로 보냅니다.
기본 로그인 페이지 생성: 주인님이 만드신 적 없지만, 시큐리티가 "로그인 페이지 없으면 내가 대충 하나 만들어줄게"라며 보여주는 게 바로 사진에 있는 그 페이지입니다.
임시 비밀번호 생성: 서버를 실행할 때 터미널 로그를 잘 보시면 Using generated security password: ... 라고 임시 비밀번호가 출력되어 있을 거예요. (아이디는 user입니다)

## 5. 메서드(): 메서드 뒤에는 항상 괄호가 붙어있다

## 6. UUID란?
- Universally Unique Identifier의 약자
- 하는일: 객체나 데이터의 고유한 식별자를 생성하는 데 사용
- 형식: 32자리의 16진수 숫자를 4개의 하이픈(-)으로 구분하여 총 36자리 문자열로 표현
 예: 123e4567-e89b-12d3-a456-426614174000
- 사용처: 데이터베이스의 기본 키, 세션 식별자, 파일 이름 등
- 장점: 충돌 가능성이 매우 낮아 대규모 시스템에서 고유 식별자가 필요할 때 유용
- randomUUID() : 랜덤한 UUID 값을 생성하는 자바 내장 메서드

## 자바에서의 = 이 의미하는것
- 대입 연산자: 오른쪽의 값을 왼쪽의 변수에 할당하는 역할
- 예시: String id = request.getParameter("id");
- 해석: request.getParameter("id") 메서드가 반환하는 값을 id 변수에 저장
- 의미: id 변수는 이제 클라이언트가 전송한 "id" 파라미터 값을 가지게 됨

## 7. AllArgsConstructor
- 모든 필드를 매개변수로 받는 생성자를 자동으로 만들어주는 롬복 어노테이션
- 클래스에 선언된 모든 필드를 초기화할 수 있는 생성자를 생성합니다.

## 8. private int enabled; 의 의미
- enabled: 사용자의 계정 활성화 상태를 나타내는 필드
- 1: 활성화된 계정 (로그인 가능)
- 0: 비활성화된 계정 (로그인 불가)

## 9.  public Users() {    this.id = UUID.randomUUID().toString(); }
- 기본 생성자: 매개변수가 없는 생성자
- this.id = UUID.randomUUID().toString(); : 객체가 생성될 때마다 고유한 UUID 값을 id 필드에 자동으로 할당

## 10. User, UserAuth, CustomerUser 는 뚜렷한 책임(Role)을 가지고 나뉘어져 있다
1. User.java(회원 정보가 담겨져 있다.)
- 역할: 우리 시스템의 데이터베이스(user 테이블)과 1:1로 대응되는 객체
- 사용자의 아이디, 비밀번호, 이름, 이메일 등 -순수한 회원정보를 저장 및 전달하기 위한 존재

1. UserAuth.java(권한 정보)
- 역할: 데이터베이스의 user_auth테이블과 대응되는 객체.
- 1:N 관계로 한 명의 사용자가 여러 개의 권한을 가질 수 있다.

1. CustomerUser.java(시큐리티 전용 브릿지) 🚀 (매우 중요!)
- 역할: 스프링 시큐리티는 자기들만의 규칙이 있음. 유저 정보를 다룰때 UserDetails라는 인터페이스를 지켜야만 로그인을 시켜줌
- 그런데 우리가 만든 User 클래스에는 시큐리티가 모르는 name, email, no와 같은 필드와 메서드들이 많이 존재함
- 그래서 User 시큐리티에게 시큐리티만의 방식대로 유저를 관리하되(UserDetails), 내가 만든 User 정보도 통째로 갖고있어줘 라고 말하기 위해 만든것이 CustomerUser 클래스이다.
- 나중에 로그인한 사용자의 이름을 화면에 띄우고 싶을때, CustomerUser 객체를 통해 User 객체에 접근하여 이름을 가져올 수 있다.

## 11. public void handle()
- 메서드 선언: "접근 거부가 발생했을 때 실행될 메서드"를 정의
11-1. HttpServletRequest request:
사용자가 보낸 요청 정보가 들어있는 객체(예: URL, 헤더, 파라미터 등)
11-2. HttpServletResponse response:
서버가 사용자에게 응답을 보낼 때 사용하는 객체(에러 페이지로 보낼지, 메시지를 띄울지 결정할 때 씀)
11-3. AccessDeniedException accessDeniedException:
접근 거부와 관련된 예외 정보가 담긴 객체(왜 접근이 거부되었는지에 대한 상세 정보 포함)

## 12. log.info("접근 권한이 없습니다.")
- 서버 콘솔창에"접근 권한이 없습니다."라는 메시지를 출력하는 코드
- 실무에서는 이런 로그를 통해 누가 언제 어떤 페이지에 접근하려 했는지 기록하고 분석할 수 있음.

## 13. ("/login?error"); 물음표의 의미
- 이동할 페이지의 주소
- 예: /login 페이지로 이동하면서 error라는 쿼리 파라미터를 함께 전달

## 14. cookie.setMaxAge(60 *60* 24 * 7)
- 각 숫자가 의미하는것: 60초 *60분* 24시간 * 7일
- 쿠키의 유효 기간을 7일로 설정하는 코드

## 15. cookie.setPath("/")
- 쿠키의 설정 경로를 "/"로 지정
- "/" 경로: 웹사이트의 모든 페이지에서 쿠키에 접근할 수 있도록 설정

## 16. 쿠키란?
- 쿠키: 웹사이트가 사용자의 브라우저에 저장하는 작은 데이터 조각
- 용도: 사용자 식별, 세션 관리, 개인화 설정 저장 등
- 동작 방식: 사용자가 웹사이트를 방문할 때마다 브라우저가 해당 쿠키를 서버로 전송하여 사용자 정보를 식별

## 17. LEFT JOIN user_auth
- LEFT JOIN: SQL에서 두 테이블을 결합할 때 사용하는 조인 방식 중 하나
- 역할: 왼쪽 테이블(여기서는 user 테이블)의 모든 행을 포함하고, 오른쪽 테이블(user_auth)의 일치하는 행이 없으면 NULL로 채움
- 용도: 사용자가 가진 모든 권한 정보를 함께 조회하기 위해 사용

## 18. @PreAuthorize 어노테이션

- 뜻: 메서드 실행 전에 특정 조건을 검사하는 역할
- 활용: 메서드에 접근할 수 있는 사용자의 권한을 미리 확인하여, 권한이 없는 사용자의 접근을 차단
- 예시: @PreAuthorize("hasAuthority('ADMIN')")는 해당 메서드에 ADMIN 권한이 있는 사용자만 접근할 수 있도록 설정

## 19. 코드의 색상이 의미하는 것

- 파란색: 키워드(예: public, class, void) - 자바 언어에서 미리 정의된 예약어
- 초록색: 주석(예: // 설명) - 코드에 대한 설명이나 메모
- 갈색: 문자열(예: "텍스트") - 따옴표로 감싸진 문자들의 집합
- 검은색: 일반 코드(예: 변수명, 메서드명) - 개발자가 정의한 이름들
- 분홍색: 숫자(예: 123, 45.67) - 정수나 실수 값
- 보라색: 어노테이션(예: @Override, @Autowired) - 메타데이터를 제공하는 특별한 표기법

## 20. #p뜻

- #p: Thymeleaf에서 HTML 폼 요소의 값을 바인딩할 때 사용하는 접두사
- ex>
 @PreAuthorize("( hasRole('ADMIN')) or (#p0  != null and @BoardService.isOwner(#p0, authentication.principal.user.no))")
- 해석: 첫 번째 파라미터가 null이 아니고, BoardService의 isOwner 메서드가 true를 반환하는 경우에만 접근 허용

## 21. @Secured

- 뜻: 메서드 또는 클래스에 특정 권한이 있는 사용자만 접근할 수 있도록 제한하는 어노테이션
- 역할: @Secured 어노테이션에 지정된 권한을 가진 사용자만 해당 메서드 또는 클래스에 접근할 수 있도록 설정

## 22. @EnableMethodSecurity

- 뜻: 메서드 수준에서 보안 설정을 활성화하는 어노테이션
- 역할: @PreAuthorize, @PostAuthorize 등의 어노테이션을 사용하여 메서드 접근 제어를 가능하게 함
- @PreAuthorize: 어노테이션을 사용전 반드시 클래스에 이 어노테이션을 추가해야 함
- @PostAuthorize: 메서드 실행 후에 접근 권한을 검사하는 어노테이션

## 22. MethodSecurityInterceptor

- 뜻: 스프링 시큐리티에서 메서드 호출 시 보안 검사를 수행하는 인터셉터
- 역할: 메서드가 호출되기 전에 사용자의 권한을 확인하여, 권한이 없는 사용자의 접근을 차단

## 23. Thymeleaf

- 뜻: 서버 사이드 템플릿 엔진 중 하나로, HTML 파일 내에 동적인 데이터를 삽입하여 웹 페이지를 생성하는 도구
- 데이터 꾸러미: 서버에서 생성된 데이터를 HTML에 바인딩하기 위한 변수와 표현식들의 집합
- 역할: 서버에서 동적으로 생성된 데이터를 HTML에 바인딩하여 사용자에게 전달

## security 폴더별 역할 정리(Gemini정리)
- ⚙️설정(Config)
1. SecurityConfig.java: 인가 및 인증 정책 (URL 권한 설정, 폼 로그인, 자동 로그인, 핸들러 등록 등 보안 설정의 중심)

- 🎮컨트롤러(Controller)
1. AdminContoller.java: 관리자 전용 기능(/admin 경로의 관리자 페이지 매핑)
2. BoardController.java: 게시판 CRUD 요청 처리(목록, 상세, 등록, 수정, 삭제 페이지 및 로직 연결)
3. ExceptionController.java: 예외 처리
4. HomeController.java: 공동 페이지 매핑(메인, 로그인, 회원가입 페이지 이동)

- 📦데이터 객체(DTO)
1. Board.java: 게시글 속성(번호, 제목, 작성자, 내용, 날짜 등 데이터 구조 정의)
2. CustomUser.java: 스프링 시큐리티(Spring Security) 인증객체(UserDetails) 구현을 통해 DB 사용자 정보를 보안 컨텍스트에 담음
3. UserAuth.java: 사용자 권한(ROLE_USER, ROLE_ADMIN 등 매핑된 권한 정보)
4. Users.java: 사용자 기본 정보(아이디, 비밀번호, 이름, 이메일 등 회원 데이터)

🛡️ 핸들러 (Handler)
1. CustomAccessDeniedHandler.java: 접근 거부 핸들러(권한 없을 때 403 에러 페이지 접근(리다이렉트 및 로그기록))
2. LoginFailureHandler.java: 로그인 실패 핸들러(에러 메시지 처리 및 로그인 페이지 재이동(리다이렉트))
3. LoginSuccessHandler.java: 로그인 성공 로직 (아이디 저장 쿠키 생성 및 이전 페이지 리다이렉트)
4. LogoutSuccessHandler.java: 로그아웃 처리 (로그아웃 성공 후 이동할 경로 및 세션 정리 확인)

매퍼 (Mapper)
1. BoardMapper.java: 게시판 SQL 정의 (MyBatis와 연결된 DB 인터페이스)
2. UserMapper.java: 사용자 SQL 정의 (회원가입, 정보 조회, 권한 추가 등 DB 조작)

💼 서비스 (Service)
1. BoardService.java / BoardServiceImpl.java: 게시판 비즈니스 로직 (게시글 처리 업무 흐름, 두개의 파일이 서로 연결되어있음)
2. UserDetailServiceImpl.java: DB 기반 사용자 조회 (로그인 시 UserDetailsService 인터페이스를 통해 사용자 유효성 검사)
3. UserService.java / UserServiceImpl.java: 회원 관리 로직 (사용자 등록 시 비밀번호 암호화 및 권한 부여 처리)

🚀 실행 (Application)
1. SecurityApplication.java: 프로그램 진입점 (Spring Boot 애플리케이션 시작) - 자동 생성됨
2. ServletInitializer.java: 서블릿 구성 (WAR 배포 환경을 위한 서블릿 빌더 설정) - 자동 생성됨

## 24. security 폴더별 역할
- config: 스프링 시큐리티 설정 파일들을 모아놓은 폴더
 SecurityConfig의 역할: 애플리케이션의 보안 설정을 담당하는 클래스으로,
                        인증 및 인가 규칙, 로그인/로그아웃 설정 등을 정의한다.
- DTO (Data Transfer Object) : 계층 간 데이터 교환을 위한 객체
 BOARD의 역할: 데이터베이스의 BOARD 테이블과 매핑되는 객체로,
               게시판 글의 정보를 담고, 애플리케이션 내에서 데이터를 전달하는 역할을 한다.
 CustomUser: Spring Security의 UserDetails 인터페이스를 구현하여,
             사용자 인증 및 권한 부여에 필요한 사용자 정보를 제공하는 객체이다.
 UserAuth: 사용자 권한 정보를 담는 객체로, 사용자와 권한 간의 매핑을 관리한다.
 Users: 사용자 정보를 담는 객체로, 애플리케이션 내에서 사용자 데이터를 전달하는 역할을 한다.

Contoller: 클라이언트의 요청을 처리하고, 적절한 응답을 반환하는 역할을 한다.

## 25. Thymeleaf 문법
- 타입리프 블록
 th:block(투명블록or투명태그) 태그를 사용하여 HTML 내에서 여러 줄의 Thymeleaf 코드를 작성할 수 있는 블록을 생성합니다.
-

## 26. 타임리프 레이아웃 다이얼렉트
- 뜻: Thymeleaf에서 레이아웃 다이얼렉트를 사용하여 공통 레이아웃을 정의하고,
  각페이지에서 해당 레이아웃을 확장하여 일관된 디자인을 유지하는 방법
- 역할: 공통 레이아웃 파일을 만들어 여러 페이지에서 재사용함으로써 코드 중복을 줄이고
  유지보수를 용이하게 함
- 예시코드:

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>My Application</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body layout:decorate="~{layouts/main}">
    <div layout:fragment="content">
        <!-- 페이지별 콘텐츠가 여기에 들어감 -->
    </div>
</body>
</html>

## 27. 레이아웃(layout)
뜻: 웹 페이지의 공통된 구조나 틀을 의미
역할: 여러 페이지에서 동일한 레이아웃을 사용하여 일관된 디자인과 사용자 경험 제공
예시: 헤더, 푸터, 네비게이션 바 등 공통 요소

## 28. MVC패턴(Model-View-Controller)
Model(모델): 애플리케이션의 데이터와 비즈니스 로직을 담당하는 부분
View(뷰): 사용자 인터페이스(UI)를 담당하며, 모델의 데이터를 화면에 표시하는 역할
Controller(컨트롤러): 사용자 입력을 처리하고, 모델과 뷰 사이의 중재자 역할을 수행
model -> controller -> view 의 흐름으로 동작 서로 유기적으로 연결 되어 있음

## 29. Entity
Entity뜻: 
@Entity뜻
## &lt; : HTML에서 '<' 문자를 나타내기 위한 특수 문자 엔티티

## &gt; : HTML에서 '>' 문자를 나타내기 위한 특수 문자 엔티티

## &amp; : HTML에서 '&' 문자를 나타내기 위한 특수 문자 엔티티

## &nbsp; : HTML에서 공백(space) 문자를 나타내기 위한 특수 문자 엔티티

## &quot; : HTML에서 큰따옴표(") 문자를 나타내기 위한 특수 문자 엔티티
