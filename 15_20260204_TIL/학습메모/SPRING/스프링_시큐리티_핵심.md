## 스프링 시큐리티 (Spring Security) 핵심 정리

### 주요 용어 및 도구
- **BCryptPasswordEncoder**: 비밀번호를 안전한 해시값으로 암호화하여 저장해주는 보안 도구.
- **CSRF Token**: 사용자가 의도하지 않은 가짜 요청을 방지하기 위해 서버가 발행하는 보안 토큰 (폼 전송 시 필수).
- **CustomUser (UserDetails)**: 스프링 시큐리티의 인증 객체 규칙에 맞게 사용자 정보를 담는 브릿지 역할.

### 주요 어노테이션
- **@PreAuthorize**: 메서드 실행 전에 권한 검사 (예: `hasRole('ADMIN')`).
- **@Secured**: 특정 권한이 있는 사용자만 접근하도록 제한하는 간단한 방식.
- **@EnableMethodSecurity**: 메서드 수준의 보안 설정을 활성화.

### 핸들러 (Handler) 역할
- **CustomAccessDeniedHandler**: 권한 없는 페이지 접근 시 처리 (403 에러 로그 기록 등).
- **LoginSuccessHandler**: 로그인 성공 후 로직 (쿠키 생성, 이전 페이지 이동 등).
- **LoginFailureHandler**: 로그인 실패 시 에러 메시지 처리.

### 기타
- **Spring Security 자동 로그인**: 쿠키 유효 기간 설정 (`setMaxAge`) 및 토큰 저장 방식 사용.
- **아무 설정을 하지 않아도 로그인 창이 뜨는 이유**: `spring-boot-starter-security` 의존성 추가 시 기본적으로 모든 경로를 보호하기 때문.
